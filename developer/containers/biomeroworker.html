<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BIOMERO Worker Container &mdash; NL-BIOMERO latest documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Database Containers" href="database.html" />
    <link rel="prev" title="OMERO Web Container" href="omeroweb.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            NL-BIOMERO
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">System Administration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sysadmin/index.html">System Administration Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../sysadmin/deployment.html">Deployment Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sysadmin/deployment.html#nl-biomero-deployment-upgrade-guide">NL-BIOMERO Deployment &amp; Upgrade Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/deployment.html#scenario-0-development-demo">Scenario 0: Development &amp; Demo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/deployment.html#scenario-1-fresh-deployment-no-existing-data">Scenario 1: Fresh Deployment (no existing data)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/deployment.html#scenario-2-fresh-deployment-with-existing-data">Scenario 2: Fresh Deployment with Existing Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/deployment.html#scenario-3-hybrid-deployment-with-existing-omero-server">Scenario 3: Hybrid Deployment with Existing OMERO Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/deployment.html#scenario-4-full-non-docker-install-not-recommended">Scenario 4: Full Non-Docker Install (Not Recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/deployment.html#notes">Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/deployment.html#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html">OMERO.biomero Plugin Administration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#accessing-admin-interfaces">Accessing Admin Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#importer-admin-configuration">Importer Admin Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#group-folder-mappings">Group Folder Mappings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#configuration-file-management">Configuration File Management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#analyzer-admin-configuration">Analyzer Admin Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#configuration-file-sharing">Configuration File Sharing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#settings-interface-usage">Settings Interface Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#settings-categories">Settings Categories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#ssh-settings">1. SSH Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#slurm-settings">2. Slurm Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#analytics-settings">3. Analytics Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#converters-settings">4. Converters Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#models-settings-workflows">5. Models Settings (Workflows)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#slurm-check-setup-output">Slurm Check Setup Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#security-considerations">Security Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sysadmin/omero-biomero-admin.html#related-documentation">Related Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sysadmin/docker-compose-scenarios.html">Docker Compose Scenarios</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sysadmin/docker-compose-scenarios.html#nl-biomero-deployment-scenarios-and-docker-compose-files">NL-BIOMERO Deployment Scenarios and Docker Compose Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/docker-compose-scenarios.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/docker-compose-scenarios.html#important-usage-note">Important Usage Note</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/docker-compose-scenarios.html#scenario-0-development-demo">Scenario 0: Development &amp; Demo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/docker-compose-scenarios.html#scenario-1-fresh-deployment-no-existing-data">Scenario 1: Fresh Deployment (no existing data)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/docker-compose-scenarios.html#scenario-2-fresh-deployment-with-existing-data">Scenario 2: Fresh Deployment with Existing Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/docker-compose-scenarios.html#scenario-3-hybrid-deployment-with-existing-omero-server">Scenario 3: Hybrid Deployment with Existing OMERO Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/docker-compose-scenarios.html#additional-configurations">Additional Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/docker-compose-scenarios.html#creating-a-custom-deployment">Creating a Custom Deployment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/docker-compose-scenarios.html#detailed-deployment-guides">Detailed Deployment Guides</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sysadmin/linux-deployment.html">Linux/Ubuntu Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sysadmin/linux-deployment.html#nlbiomero-ubuntu-linux">NL‑BIOMERO (Ubuntu/Linux) 🚀</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/linux-deployment.html#prerequisites">🧰 Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/linux-deployment.html#key-differences-from-windows-docker-desktop">🔧 Key Differences from Windows Docker Desktop</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/linux-deployment.html#quick-start-ubuntu">✅ Quick Start (Ubuntu)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/linux-deployment.html#troubleshooting-tips">🛠️ Troubleshooting Tips</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/linux-deployment.html#lessons-learned">🧠 Lessons Learned</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/linux-deployment.html#tl-dr">📋 TL;DR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/linux-deployment.html#additional-resources">🔗 Additional Resources</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sysadmin/development-setup.html">Development &amp; Demo Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sysadmin/development-setup.html#biomero-101-installation-guide">BIOMERO 101 Installation Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sysadmin/backup-restore.html">Backup and Restore</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sysadmin/backup-restore.html#nl-biomero-backup-restore-scripts">NL-BIOMERO Backup &amp; Restore Scripts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/backup-restore.html#key-features">Key Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/backup-restore.html#quick-start">Quick Start</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/backup-restore.html#individual-script-usage">Individual Script Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/backup-restore.html#restore-scripts">Restore Scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/backup-restore.html#omero-configuration-hierarchy">OMERO Configuration Hierarchy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/backup-restore.html#example-backup-omero-from-host-folder">Example: Backup OMERO from Host Folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/backup-restore.html#example-backup-metabase-from-host-folder">Example: Backup Metabase from Host Folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/backup-restore.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/backup-restore.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sysadmin/backup-restore.html#help">Help</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html">Developer Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started.html#quick-setup-for-development">Quick Setup for Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started.html#development-features">Development Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started.html#containerized-omero-with-biomero">Containerized OMERO with BIOMERO</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">Architecture Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../architecture.html#container-architecture">Container Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../architecture.html#network-architecture">Network Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../architecture.html#storage-architecture">Storage Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../architecture.html#integration-points">Integration Points</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Container Development</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="omeroserver.html">OMERO Server Container</a><ul>
<li class="toctree-l4"><a class="reference internal" href="omeroserver.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroserver.html#key-customizations">Key Customizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroserver.html#dockerfile-key-changes">Dockerfile Key Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroserver.html#development-guidelines">Development Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroserver.html#related-documentation">Related Documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="omeroweb.html">OMERO Web Container</a><ul>
<li class="toctree-l4"><a class="reference internal" href="omeroweb.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroweb.html#development-workflow">Development Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroweb.html#key-installed-plugins">Key Installed Plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroweb.html#custom-interface-modifications">Custom Interface Modifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroweb.html#dockerfile-key-sections">Dockerfile Key Sections</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroweb.html#development-guidelines">Development Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroweb.html#related-documentation">Related Documentation</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">BIOMERO Worker Container</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#key-features">Key Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#container-customizations">Container Customizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-management">Configuration Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="#worker-startup-process">Worker Startup Process</a></li>
<li class="toctree-l4"><a class="reference internal" href="#development-guidelines">Development Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#upgrade-considerations">Upgrade Considerations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#related-documentation">Related Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#external-resources">External Resources</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="database.html">Database Containers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="database.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#key-components">Key Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#schema-customization">Schema customization</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#migration">Migration</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#performance-tuning">Performance tuning</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#backup-automation">Backup automation</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#accessing-postgresql">Accessing PostgreSQL</a></li>
<li class="toctree-l4"><a class="reference internal" href="database.html#related-documentation">Related Documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="metabase.html">Metabase Container</a><ul>
<li class="toctree-l4"><a class="reference internal" href="metabase.html#why-metabase">Why Metabase?</a></li>
<li class="toctree-l4"><a class="reference internal" href="metabase.html#dashboard-development">Dashboard Development</a></li>
<li class="toctree-l4"><a class="reference internal" href="metabase.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l4"><a class="reference internal" href="metabase.html#related-documentation">Related Documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="omeroadi.html">OMERO ADI Container</a><ul>
<li class="toctree-l4"><a class="reference internal" href="omeroadi.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroadi.html#import-workflow">Import Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroadi.html#import-order-creation-and-management">Import order creation and management</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroadi.html#file-system-monitoring-and-processing">File system monitoring and processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroadi.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroadi.html#integration-with-omero-server">Integration with OMERO server</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroadi.html#custom-import-pipeline-development">Custom import pipeline development</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroadi.html#error-handling-and-retry-mechanisms">Error handling and retry mechanisms</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroadi.html#testing">Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroadi.html#security-and-runtime-requirements">Security and runtime requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="omeroadi.html#related-documentation">Related Documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="releases.html">Container Releases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="releases.html#release-overview">Release Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#release-workflow">Release Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#versioning-guidelines">Versioning Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#dependency-management">Dependency Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#omero-adi-submodule">OMERO ADI Submodule</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#docker-hub-management">Docker Hub Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#communication-announcements">Communication &amp; Announcements</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#troubleshooting-releases">Troubleshooting Releases</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#best-practices">Best Practices</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#related-documentation">Related Documentation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../user/getting-started.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user/getting-started.html#first-steps-with-nl-biomero">First Steps with NL-BIOMERO</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user/getting-started.html#access-the-platform">Access the Platform</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user/getting-started.html#default-login">Default Login</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user/getting-started.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user/getting-started.html#platform-overview">Platform Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user/getting-started.html#biomero-bioimage-analysis">🧬 BIOMERO - BioImage Analysis</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">NL-BIOMERO</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Developer Guide</a></li>
          <li class="breadcrumb-item"><a href="index.html">Container Development</a></li>
      <li class="breadcrumb-item active">BIOMERO Worker Container</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/developer/containers/biomeroworker.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="biomero-worker-container">
<h1>BIOMERO Worker Container<a class="headerlink" href="#biomero-worker-container" title="Permalink to this heading"></a></h1>
<p>The BIOMERO worker container handles distributed image analysis processing through Slurm integration and serves as the dedicated OMERO.grid Processor node.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>Based on the <code class="docutils literal notranslate"><span class="pre">openmicroscopy/omero-server</span></code> image, this container is configured as a specialized OMERO worker node that exclusively handles script execution via the <strong>Processor-0</strong> role in OMERO.grid.</p>
<p><strong>Grid Role Assignment</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">CONFIG_omero_server_nodedescriptors</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;-</span>
<span class="w">  </span><span class="no">master:Blitz-0</span>
<span class="w">  </span><span class="no">omeroworker-1:Tables-0,Indexer-0,PixelData-0,DropBox,MonitorServer,FileServer,Storm</span>
<span class="w">  </span><span class="no">biomeroworker-external:Processor-0</span>
</pre></div>
</div>
<p>This ensures all OMERO script execution (<strong>including BIOMERO scripts</strong>) is routed to this container, which has the specialized environment needed for HPC cluster integration.</p>
</section>
<section id="key-features">
<h2>Key Features<a class="headerlink" href="#key-features" title="Permalink to this heading"></a></h2>
<dl class="simple">
<dt><strong>HPC Integration</strong></dt><dd><ul class="simple">
<li><p><strong>SSH Access</strong>: Direct SSH connectivity to Slurm clusters</p></li>
<li><p><strong>Single Account Model</strong>: One SSH key, one Slurm account per deployment</p></li>
<li><p><strong>Secure Mounting</strong>: SSH keys mounted securely via startup scripts, not prepackaged</p></li>
</ul>
</dd>
<dt><strong>Workflow Processing</strong></dt><dd><ul class="simple">
<li><p><strong>OMERO Script Execution</strong>: All script processing via Processor-0 role</p></li>
<li><p><strong>Event Sourcing</strong>: Complete workflow tracking in PostgreSQL database</p></li>
<li><p><strong>Data Export</strong>: ZARR format export for HPC workflows</p></li>
</ul>
</dd>
<dt><strong>Analysis Pipeline</strong></dt><dd><ul class="simple">
<li><p><strong>Format Conversion</strong>: OMERO → ZARR → TIFF workflow</p></li>
<li><p><strong>Multi-format Support</strong>: Handles diverse input formats via bioformats2raw</p></li>
<li><p><strong>Workflow Management</strong>: Configurable analysis pipelines</p></li>
</ul>
</dd>
</dl>
</section>
<section id="container-customizations">
<h2>Container Customizations<a class="headerlink" href="#container-customizations" title="Permalink to this heading"></a></h2>
<section id="ssh-integration">
<h3>SSH Integration<a class="headerlink" href="#ssh-integration" title="Permalink to this heading"></a></h3>
<p><strong>SSH Client Installation</strong>:</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">RUN</span><span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>openssh-clients
<span class="k">COPY</span><span class="w"> </span>biomeroworker/10-mount-ssh.sh<span class="w"> </span>/startup/10-mount-ssh.sh
</pre></div>
</div>
<p><strong>SSH Key Mounting</strong> (<code class="docutils literal notranslate"><span class="pre">10-mount-ssh.sh</span></code>):</p>
<ul class="simple">
<li><p>Copies SSH keys from <code class="docutils literal notranslate"><span class="pre">/tmp/.ssh</span></code> to <code class="docutils literal notranslate"><span class="pre">/opt/omero/server/.ssh</span></code></p></li>
<li><p>Sets proper permissions (700 for directory, 600 for private keys)</p></li>
<li><p>Enables secure HPC cluster access, without baking secrets into the container image</p></li>
</ul>
<p><strong>Usage</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Mount SSH keys in docker-compose</span>
<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;$HOME/.ssh:/tmp/.ssh:ro&quot;</span>
</pre></div>
</div>
</section>
<section id="database-integration">
<h3>Database Integration<a class="headerlink" href="#database-integration" title="Permalink to this heading"></a></h3>
<p><strong>PostgreSQL Support</strong>:</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">RUN</span><span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3-devel<span class="w"> </span>postgresql-devel<span class="w"> </span>gcc
</pre></div>
</div>
<p><strong>Purpose</strong>:</p>
<ul class="simple">
<li><p><strong>Event Sourcing</strong>: Complete workflow execution tracking</p></li>
<li><p><strong>Analytics</strong>: Detailed workflow performance data</p></li>
<li><p><strong>Audit Trail</strong>: Full history of analysis jobs and statuses</p></li>
<li><p><strong>SLURM Job Accounting</strong>: Tracks resource usage per job and per OMERO user</p></li>
</ul>
<p><strong>BIOMERO 2.0 Feature</strong>: Near real-time event logging provides a single source of truth for all workflow events.</p>
</section>
<section id="data-export-pipeline">
<h3>Data Export Pipeline<a class="headerlink" href="#data-export-pipeline" title="Permalink to this heading"></a></h3>
<p><strong>bioformats2raw Installation</strong>:</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">RUN</span><span class="w"> </span>wget<span class="w"> </span>https://github.com/glencoesoftware/bioformats2raw/releases/download/v0.7.0/bioformats2raw-0.7.0.zip
</pre></div>
</div>
<p><strong>ZARR Export Support</strong>:</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">RUN</span><span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>blosc-devel
<span class="c"># ...</span>
<span class="k">RUN</span><span class="w"> </span><span class="nv">$VIRTUAL_ENV</span>/bin/python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>omero-cli-zarr<span class="o">==</span><span class="m">0</span>.5.5
</pre></div>
</div>
<p><strong>Export Workflow</strong>:</p>
<ol class="arabic simple">
<li><p><strong>OMERO Data</strong> → Export via <code class="docutils literal notranslate"><span class="pre">omero-cli-zarr</span></code></p></li>
<li><p><strong>ZARR Format</strong> → Universal intermediate format</p></li>
<li><p><strong>TIFF Conversion</strong> → On HPC cluster for analysis tools</p></li>
<li><p><strong>Results Import</strong> → Back to OMERO as new images/annotations</p></li>
</ol>
</section>
<section id="biomero-library-integration">
<h3>BIOMERO Library Integration<a class="headerlink" href="#biomero-library-integration" title="Permalink to this heading"></a></h3>
<p><strong>Core BIOMERO Installation</strong>:</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">RUN</span><span class="w"> </span><span class="nv">$VIRTUAL_ENV</span>/bin/python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span><span class="nv">biomero</span><span class="o">==</span><span class="si">${</span><span class="nv">BIOMERO_VERSION</span><span class="si">}</span>
</pre></div>
</div>
<p><strong>Supporting Libraries</strong>:</p>
<p>For BIOMERO scripts. These can have extra dependencies above just BIOMERO python library.</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">RUN</span><span class="w"> </span><span class="nv">$VIRTUAL_ENV</span>/bin/python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">ezomero</span><span class="o">==</span><span class="m">1</span>.1.1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">tifffile</span><span class="o">==</span><span class="m">2020</span>.9.3<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>omero-metadata<span class="o">==</span><span class="m">0</span>.12.0
</pre></div>
</div>
<p><strong>Zero-C ICE Pre-built Wheels</strong>:</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">RUN</span><span class="w"> </span>wget<span class="w"> </span>https://github.com/glencoesoftware/zeroc-ice-py-linux-x86_64/releases/download/20240202/zeroc_ice-3.6.5-cp39-cp39-manylinux_2_28_x86_64.whl
</pre></div>
</div>
</section>
<section id="custom-processor-implementation">
<h3>Custom Processor Implementation<a class="headerlink" href="#custom-processor-implementation" title="Permalink to this heading"></a></h3>
<p><strong>Modified processor.py</strong>:</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">COPY</span><span class="w"> </span>biomeroworker/processor.py<span class="w"> </span>/opt/omero/server/venv3/lib/python3.9/site-packages/omero/
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Maintenance Alert</strong>: This file overrides the base OMERO processor.py and may conflict with future OMERO updates.</p>
<p><strong>Key Changes</strong>:
* Environment variable forwarding to subprocesses (HTTP_PROXY, etc.)
* Enhanced subprocess handling for BIOMERO workflows</p>
<p><strong>Maintenance Required</strong>: Periodically merge important changes from upstream OMERO processor.py to maintain compatibility.</p>
</div>
<p><strong>Original Source</strong>: <a class="reference external" href="https://raw.githubusercontent.com/ome/omero-py/master/src/omero/processor.py">ome/omero-py processor.py</a></p>
</section>
</section>
<section id="configuration-management">
<h2>Configuration Management<a class="headerlink" href="#configuration-management" title="Permalink to this heading"></a></h2>
<section id="slurm-configuration">
<h3>Slurm Configuration<a class="headerlink" href="#slurm-configuration" title="Permalink to this heading"></a></h3>
<p><strong>Base Configuration</strong> (<code class="docutils literal notranslate"><span class="pre">slurm-config.ini</span></code>):</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">COPY</span><span class="w"> </span>biomeroworker/slurm-config.ini<span class="w"> </span>/etc/slurm-config.ini
</pre></div>
</div>
<p>This file contains:</p>
<p><strong>SSH Settings</strong>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[SSH]</span>
<span class="na">host</span><span class="o">=</span><span class="s">localslurm</span><span class="w">  </span><span class="c1"># SSH alias for cluster connection</span>
</pre></div>
</div>
<p><strong>Slurm Paths</strong>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[SLURM]</span>
<span class="na">slurm_data_path</span><span class="o">=</span><span class="s">/data/my-scratch/data</span>
<span class="na">slurm_images_path</span><span class="o">=</span><span class="s">/data/my-scratch/singularity_images/workflows</span>
<span class="na">slurm_script_path</span><span class="o">=</span><span class="s">/data/my-scratch/slurm-scripts</span>
</pre></div>
</div>
<p><strong>Workflow Models</strong>:</p>
<ul class="simple">
<li><p>Cellpose segmentation</p></li>
<li><p>StarDist segmentation</p></li>
<li><p>CellProfiler measurements</p></li>
<li><p>Custom analysis workflows</p></li>
</ul>
<p><strong>Configuration Override</strong>:</p>
<p>The web interface can mount a different configuration that overrides this base file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># In docker-compose</span>
<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;./slurm-config-override.ini:/etc/slurm-config.ini:ro&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Configuration Hierarchy</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Base file</strong> (in container): Default workflows and settings</p></li>
<li><p><strong>Override file</strong> (mounted): Admin customizations via web interface</p></li>
<li><p><strong>Limitation</strong>: Override can modify/add but cannot delete base configurations</p></li>
</ol>
</div>
</section>
<section id="analytics-configuration">
<h3>Analytics Configuration<a class="headerlink" href="#analytics-configuration" title="Permalink to this heading"></a></h3>
<p><strong>BIOMERO 2.0 Analytics</strong> (from <code class="docutils literal notranslate"><span class="pre">slurm-config.ini</span></code>):</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[ANALYTICS]</span>
<span class="na">track_workflows</span><span class="o">=</span><span class="s">True</span>
<span class="na">enable_job_accounting</span><span class="o">=</span><span class="s">True</span>
<span class="na">enable_job_progress</span><span class="o">=</span><span class="s">True</span>
<span class="na">enable_workflow_analytics</span><span class="o">=</span><span class="s">True</span>
</pre></div>
</div>
<p><strong>Database Connection</strong>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># Uses environment variable SQLALCHEMY_URL or container&#39;s PostgreSQL connection</span>
<span class="na">sqlalchemy_url</span><span class="o">=</span><span class="s">postgresql+psycopg2://user:password@localhost:5432/biomero</span>
</pre></div>
</div>
</section>
</section>
<section id="worker-startup-process">
<h2>Worker Startup Process<a class="headerlink" href="#worker-startup-process" title="Permalink to this heading"></a></h2>
<section id="configuration-generation">
<h3>Configuration Generation<a class="headerlink" href="#configuration-generation" title="Permalink to this heading"></a></h3>
<p>The startup script dynamically generates OMERO configuration:</p>
<p><strong>Internal Worker</strong> (<code class="docutils literal notranslate"><span class="pre">99-run.sh</span></code>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># For workers in same Docker network</span>
<span class="nv">MASTER_ADDR</span><span class="o">=</span><span class="k">$(</span>getent<span class="w"> </span>hosts<span class="w"> </span><span class="nv">$CONFIG_omero_master_host</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="se">\ </span><span class="w"> </span>-f1<span class="k">)</span>
<span class="nv">WORKER_ADDR</span><span class="o">=</span><span class="k">$(</span>getent<span class="w"> </span>hosts<span class="w"> </span><span class="nv">$OMERO_WORKER_NAME</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="se">\ </span><span class="w"> </span>-f1<span class="k">)</span>
</pre></div>
</div>
<p><strong>Worker Configuration</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>&gt;<span class="w"> </span>OMERO.server/etc/<span class="nv">$OMERO_WORKER_NAME</span>.cfg<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<span class="s">IceGrid.Node.Endpoints=tcp -h $WORKER_ADDR -p $WORKER_PORT</span>
<span class="s">IceGrid.Node.Name=$OMERO_WORKER_NAME</span>
<span class="s">IceGrid.Node.Data=var/$OMERO_WORKER_NAME</span>
<span class="s">Ice.StdOut=var/log/$OMERO_WORKER_NAME.out</span>
<span class="s">EOF</span>
</pre></div>
</div>
<p><strong>ICE Configuration</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;s/@omero.master.host@/</span><span class="nv">$MASTER_ADDR</span><span class="s2">/&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>OMERO.server/etc/templates/ice.config<span class="w"> </span>&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>OMERO.server/etc/ice.config
</pre></div>
</div>
</section>
</section>
<section id="development-guidelines">
<h2>Development Guidelines<a class="headerlink" href="#development-guidelines" title="Permalink to this heading"></a></h2>
<section id="biomero-script-development">
<h3>BIOMERO Script Development<a class="headerlink" href="#biomero-script-development" title="Permalink to this heading"></a></h3>
<p><strong>Script Location</strong>: BIOMERO scripts are installed on the <strong>OMERO server container</strong>, not the worker:</p>
<ul class="simple">
<li><p>Scripts live in: <code class="docutils literal notranslate"><span class="pre">/opt/omero/server/OMERO.server/lib/scripts/biomero/</span></code></p></li>
<li><p>Worker executes scripts via OMERO.grid Processor-0 role</p></li>
<li><p>Script changes require OMERO server container rebuild on release, but during development you can just upload them through web for on-the-fly testing!</p></li>
</ul>
<p><strong>Workflow Development</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Create workflow</strong>: In separate repository (e.g., <a class="reference external" href="https://github.com/TorecLuik/W_NucleiSegmentation-Cellpose">W_NucleiSegmentation-Cellpose</a>)</p></li>
<li><p><strong>Add to config</strong>: Update <code class="docutils literal notranslate"><span class="pre">slurm-config.ini</span></code> with new workflow</p></li>
<li><p><strong>Test locally</strong>: Use development environment</p></li>
<li><p><strong>Deploy</strong>: Release NL-BIOMERO with new workflow support via the config. Or just set it via admin in a live environment.</p></li>
</ol>
</section>
<section id="ssh-key-management">
<h3>SSH Key Management<a class="headerlink" href="#ssh-key-management" title="Permalink to this heading"></a></h3>
<p><strong>Development Setup</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate SSH key for HPC access</span>
ssh-keygen<span class="w"> </span>-t<span class="w"> </span>rsa<span class="w"> </span>-f<span class="w"> </span>~/.ssh/hpc_key
<span class="c1"># Add public key to HPC cluster</span>
<span class="c1"># Mount in development docker-compose</span>
</pre></div>
</div>
<p><strong>Production Deployment</strong>:</p>
<ul class="simple">
<li><p><strong>Single SSH Key</strong>: One key per deployment</p></li>
<li><p><strong>Single Slurm Account</strong>: One account per deployment</p></li>
<li><p><strong>Security</strong>: Keys should be rotated regularly</p></li>
<li><p><strong>Access Control</strong>: Limit SSH key to specific HPC resources</p></li>
</ul>
</section>
<section id="configuration-testing">
<h3>Configuration Testing<a class="headerlink" href="#configuration-testing" title="Permalink to this heading"></a></h3>
<p><strong>Test Slurm Configuration</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Access worker container</span>
docker-compose<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>biomeroworker<span class="w"> </span>bash

<span class="c1"># Test SSH connection</span>
ssh<span class="w"> </span>localslurm<span class="w"> </span><span class="c1"># SSH alias for HPC cluster in config.ini</span>

<span class="c1"># Test BIOMERO configuration</span>
python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;from biomero.slurm_client import SlurmClient; client = SlurmClient.from_config(); print(client.validate())&quot;</span>
</pre></div>
</div>
<p><strong>Test Analytics Database</strong>:</p>
<p>Check database connection and initialize analytics (Option 1: direct configuration)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">biomero</span><span class="w"> </span><span class="kn">import</span> <span class="n">SlurmClient</span>

<span class="n">slurmClient</span> <span class="o">=</span> <span class="n">SlurmClient</span><span class="p">(</span><span class="n">track_workflows</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">enable_job_accounting</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">enable_job_progress</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">enable_workflow_analytics</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">slurmClient</span><span class="o">.</span><span class="n">initialize_analytics_system</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Analytics system initialized&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Option 2: From config file</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">biomero</span><span class="w"> </span><span class="kn">import</span> <span class="n">SlurmClient</span>

<span class="n">slurmClient</span> <span class="o">=</span> <span class="n">SlurmClient</span><span class="o">.</span><span class="n">from_config</span><span class="p">()</span>
<span class="n">slurmClient</span><span class="o">.</span><span class="n">workflowTracker</span><span class="o">.</span><span class="n">notification_log</span><span class="o">.</span><span class="n">section_size</span> <span class="o">=</span> <span class="mi">100</span>
</pre></div>
</div>
<p>Inspect workflow notifications</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pprint</span><span class="w"> </span><span class="kn">import</span> <span class="n">pprint</span>

<span class="n">notifications</span> <span class="o">=</span> <span class="n">slurmClient</span><span class="o">.</span><span class="n">workflowTracker</span><span class="o">.</span><span class="n">notification_log</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="mi">54</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="k">if</span> <span class="n">notifications</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">notifications</span><span class="p">)</span><span class="si">}</span><span class="s1"> workflow notifications&#39;</span><span class="p">)</span>
    <span class="p">[</span><span class="n">pprint</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">notifications</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No workflow notifications found&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="eventsourcing">
<h3>Eventsourcing<a class="headerlink" href="#eventsourcing" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">biomero</span><span class="w"> </span><span class="kn">import</span> <span class="n">WorkflowTracker</span>

<span class="c1"># Process events from the start (use any leader name if desired)</span>
<span class="n">slurmClient</span><span class="o">.</span><span class="n">workflowTracker</span><span class="o">.</span><span class="n">pull_and_process</span><span class="p">(</span>
    <span class="n">leader_name</span><span class="o">=</span><span class="n">WorkflowTracker</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
    <span class="n">start</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>
</pre></div>
</div>
<p>NotificationLog</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read the first page of notifications</span>
<span class="n">slurmClient</span><span class="o">.</span><span class="n">workflowTracker</span><span class="o">.</span><span class="n">notification_log</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Aggregate view</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load an aggregate by its UUID</span>
<span class="n">slurmClient</span><span class="o">.</span><span class="n">workflowTracker</span><span class="o">.</span><span class="n">repository</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;747fc951-15ca-4b56-a19e-418e1db97d14&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this heading"></a></h2>
<section id="common-issues">
<h3>Common Issues<a class="headerlink" href="#common-issues" title="Permalink to this heading"></a></h3>
<p><strong>SSH Connection Failures</strong>:</p>
<ul class="simple">
<li><p>Check SSH key permissions (600 for private keys)</p></li>
<li><p>Verify SSH key is added to HPC cluster</p></li>
<li><p>Test SSH connection manually from container</p></li>
</ul>
<p><strong>Processor Role Issues</strong>:</p>
<ul class="simple">
<li><p>Verify grid role assignment in docker-compose</p></li>
<li><p>Check OMERO.grid node status: <code class="docutils literal notranslate"><span class="pre">omero</span> <span class="pre">admin</span> <span class="pre">diagnostics</span></code></p></li>
<li><p>Ensure only one Processor-0 node is active</p></li>
</ul>
<p><strong>BIOMERO Script Failures</strong>:</p>
<ul class="simple">
<li><p>Check script installation on OMERO server container</p></li>
<li><p>Verify BIOMERO library version compatibility</p></li>
<li><p>Review workflow configuration in <code class="docutils literal notranslate"><span class="pre">slurm-config.ini</span></code></p></li>
</ul>
<p><strong>Database Connection Issues</strong>:</p>
<ul class="simple">
<li><p>Verify PostgreSQL connection settings</p></li>
<li><p>Check SQLALCHEMY_URL environment variable</p></li>
<li><p>Ensure database schema is initialized</p></li>
</ul>
</section>
<section id="performance-optimization">
<h3>Performance Optimization<a class="headerlink" href="#performance-optimization" title="Permalink to this heading"></a></h3>
<p><strong>Resource Allocation</strong>:</p>
<ul class="simple">
<li><p><strong>CPU</strong>: Processor-intensive role benefits from multiple cores</p></li>
<li><p><strong>Memory</strong>: OME-ZARR export requires sufficient memory for large datasets</p></li>
<li><p><strong>Storage</strong>: Temporary data storage for ZARR exports and Slurm imports</p></li>
</ul>
<p><strong>Network Optimization</strong>:</p>
<ul class="simple">
<li><p><strong>External Workers</strong>: Consider network latency to master</p></li>
<li><p><strong>HPC Access</strong>: Optimize SSH connection pooling</p></li>
<li><p><strong>Data Transfer</strong>: Monitor ZARR export/import performance</p></li>
</ul>
</section>
</section>
<section id="upgrade-considerations">
<h2>Upgrade Considerations<a class="headerlink" href="#upgrade-considerations" title="Permalink to this heading"></a></h2>
<section id="biomero-library-updates">
<h3>BIOMERO Library Updates<a class="headerlink" href="#biomero-library-updates" title="Permalink to this heading"></a></h3>
<p><strong>Version Management</strong>:</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">ARG</span><span class="w"> </span>BIOMERO_VERSION
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span><span class="nv">biomero</span><span class="o">==</span><span class="si">${</span><span class="nv">BIOMERO_VERSION</span><span class="si">}</span>
</pre></div>
</div>
<p><strong>Upgrade Process</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Test new BIOMERO version</strong> in development</p></li>
<li><p><strong>Update Dockerfile</strong> with new version</p></li>
<li><p><strong>Rebuild container</strong> with updated dependencies</p></li>
<li><p><strong>Validate workflows</strong> in staging environment</p></li>
</ol>
</section>
<section id="processor-py-maintenance">
<h3>Processor.py Maintenance<a class="headerlink" href="#processor-py-maintenance" title="Permalink to this heading"></a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Critical Maintenance Task</strong>: The custom <code class="docutils literal notranslate"><span class="pre">processor.py</span></code> requires periodic review and merging with upstream changes.</p>
</div>
<p><strong>Maintenance Process</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Monitor</strong> <a class="reference external" href="https://github.com/ome/omero-py/commits/master/src/omero/processor.py">OMERO processor.py updates</a></p></li>
<li><p><strong>Review changes</strong> for compatibility and security fixes</p></li>
<li><p><strong>Merge important updates</strong> while preserving custom environment variable handling</p></li>
<li><p><strong>Test thoroughly</strong> before deploying to production</p></li>
</ol>
<p><strong>Current Custom Features</strong>:</p>
<ul class="simple">
<li><p>HTTP_PROXY and HTTPS_PROXY forwarding to subprocesses</p></li>
<li><p>Enhanced environment variable support for BIOMERO workflows</p></li>
</ul>
</section>
</section>
<section id="related-documentation">
<h2>Related Documentation<a class="headerlink" href="#related-documentation" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="omeroserver.html"><span class="doc">OMERO Server Container</span></a> - Server container and script installation</p></li>
<li><p><a class="reference internal" href="../architecture.html"><span class="doc">Architecture Overview</span></a> - Overall system architecture</p></li>
<li><p><a class="reference internal" href="releases.html"><span class="doc">Container Releases</span></a> - Container release process</p></li>
<li><p><a class="reference external" href="https://github.com/NL-BioImaging/biomero">BIOMERO Documentation</a></p></li>
<li><p><a class="reference external" href="https://omero.readthedocs.io/en/stable/sysadmins/grid.html">OMERO.grid Documentation</a></p></li>
<li><p><a class="reference external" href="https://slurm.schedmd.com/documentation.html">Slurm Documentation</a></p></li>
</ul>
</section>
<section id="external-resources">
<h2>External Resources<a class="headerlink" href="#external-resources" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/NL-BioImaging/biomero-scripts">BIOMERO Scripts Repository</a></p></li>
<li><p><a class="reference external" href="https://github.com/TorecLuik/W_NucleiSegmentation-Cellpose">Example Workflow: Cellpose</a></p></li>
<li><p><a class="reference external" href="https://github.com/glencoesoftware/bioformats2raw">bioformats2raw Documentation</a></p></li>
<li><p><a class="reference external" href="https://github.com/ome/omero-cli-zarr">OMERO CLI ZARR Plugin</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="omeroweb.html" class="btn btn-neutral float-left" title="OMERO Web Container" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="database.html" class="btn btn-neutral float-right" title="Database Containers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Core Facility Cellular Imaging.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>